<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <link rel="stylesheet" href="style.css">
    <script src="render.js"></script>
    
</head>

<body onload="load();">
    <script>
        function dark() {
            document.documentElement.style.setProperty('--background', '#000');
            document.documentElement.style.setProperty('--now-b', '#048')
            document.documentElement.style.setProperty('--text', '#fff')
        }
        function city(){
            var city = document.getElementById('search').value
            fetch('http://api.openweathermap.org/geo/1.0/direct?q='+city+'&limit=1&appid=911062246487cff1d7ff93826a7e4078').then(data => data.json()).then(data => {
                console.log(data)
                var call = {
                    "coords": {
                        "latitude": data[0].lat,
                        "longitude": data[0].lon
                    }
                }
                pos(call)
            })
        }
        function lang() {
            fetch('lang.json').then(data => data.json()).then(data => {
                console.log(data)
                var savedLang = localStorage.getItem('lang');
                if (savedLang !== 'pl' || savedLang !== 'en') {
                    localStorage.setItem('lang', 'en');
                }
                document.getElementById('welcome').innerHTML = data[savedLang].title
            })
        }
        function setLang() {
            if (localStorage.getItem('lang') == 'pl') {
                localStorage.setItem('lang', 'en');
                lang()
            }
            if (localStorage.getItem('lang') == 'en') {
                localStorage.setItem('lang', 'pl');
                lang()
            }
        }
        function load() {
            document.getElementById('row2').innerHTML = '<img src="loading.svg">'+'Lokalizowanie...'
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos);
            }
            lang()
            
        }
        function toC(temp) {
            return Math.round((temp - 273.15)) + 'ยบ';
        }
    </script>
    <div id="settings"><img src="lang.svg" onclick="setLang()"></div>
    <img src="icon.png"id="welcome">
    <input type="search" id="search" placeholder="Wyszukaj miasto, dzielnince"><button onclick="city()">Szukaj</button>
    <h3>Teraz</h3>
    <div id="row1">
        <div class="mediumbox" id="mediumbox1"><img id="icon" src="weather-icons-master\svg\wi-refresh.svg">
            <div id="temp">1</div>
            <div id="wind">
                <div id="windspeed">2.6m/s</div>
                <img id="windicon" src="weather-icons-master/svg/wi-wind-deg.svg">
            </div>
            <div id="time">22:22</div>
        </div>

    </div>
    <h3>Prognoza godzinowa</h3>
    <div id="row2">
    </div>
    <div id="row3">opis</div>
    <h3>Prognoza 7 dniowa</h3>
    <div id="row4"></div>
    <h4>Radar</h4>
    <div id="row5"><div id="map"></div></div>
    <footer>Thanks for icons from erikflowers โค</footer>
</body>

</html>