<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="title" content="OWMeteo - Pogoda">
    <meta name="description" content="Pogoda na ka≈ºdƒÖ lokalizacje. Prognoza na 48 godzin i 7 dni.">
    <meta name="keywords" content="pogoda, pogoda dzisiaj, kiedy bƒôdzie padaƒá, pogoda jutro">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">

    <title>Document</title>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="render.js"></script>

</head>

<body onload="load();">
    <script>
        function dark() {
            document.documentElement.style.setProperty('--background', '#000');
            document.documentElement.style.setProperty('--now-b', '#048')
            document.documentElement.style.setProperty('--text', '#fff')
        }
        function city() {
            var city = document.getElementById('search').value
            fetch('http://api.openweathermap.org/geo/1.0/direct?q=' + city + '&limit=1&appid=911062246487cff1d7ff93826a7e4078').then(data => data.json()).then(data => {
                console.log(data)
                var call = {
                    "coords": {
                        "latitude": data[0].lat,
                        "longitude": data[0].lon
                    }
                }
                pos(call)
            })
        }
        function lang() {
            fetch('lang.json').then(data => data.json()).then(data => {
                console.log(data)
                var savedLang = localStorage.getItem('lang');
                if (savedLang !== 'pl' || savedLang !== 'en') {
                    localStorage.setItem('lang', 'en');
                }
                document.getElementById('welcome').innerHTML = data[savedLang].title
            })
        }
        function setLang() {
            if (localStorage.getItem('lang') == 'pl') {
                localStorage.setItem('lang', 'en');
                lang()
            }
            if (localStorage.getItem('lang') == 'en') {
                localStorage.setItem('lang', 'pl');
                lang()
            }
        }
        function load() {
            
            document.getElementById('row2').innerHTML = '<img src="loading.svg">' + 'Lokalizowanie...'
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos);
            }
            else {
                document.getElementById('city').innerText = 'Lokalizacja jest niedostƒôpna. Proszƒô wyszukaƒá miasto.'
            }
            lang()
        }
        function toC(temp) {
            return Math.round((temp - 273.15)) + '¬∫';
        }
    </script>
    <div id="settings"><img src="lang.svg" onclick="setLang()"></div>
    <img src="icon.png" id="welcome">
    <input type="search" id="search" placeholder="Wyszukaj miasto, dzielnince"><button onclick="city()">Szukaj</button>
    <h3>Teraz</h3>
    <div id="row1">
        <h1 id="city">Miasto</h1>
        <div class="mediumbox" id="mediumbox1"><img id="icon" src="weather-icons-master\svg\wi-refresh.svg">
            <div id="temp">-</div>
            <div id="wind">
                <div id="windspeed">-m/s</div>
                <img id="windicon" src="weather-icons-master/svg/wi-wind-deg.svg">
            </div>
            <div id="time">--:--</div>
        </div>

    </div>
    <h3>Prognoza godzinowa</h3>
    <div id="row2">
    </div>
    <div id="row3">opis</div>
    <h3>Prognoza 7 dniowa</h3>
    <div id="row4"></div>
    <h4>Radar</h4>
    <div id="row5">
        <div id="selector"><div id="c">‚õÖ</div><div id="r">üåß</div><div id="w">üí®</div><div id="t">üå°</div><div id="n">üå¶</div></div>
        <div id="map"></div>
    </div>
    <footer>Thanks for icons from erikflowers ‚ù§</footer>
</body>

</html>